### 组件定义和事件处理
#### 组件的分类
在React中,组件分为函数组件和class组件,也就是无状态组件和有状态组件。
- 函数式组件(无状态组件)
  直接定义函数的形式,不存在state,只会有props,它没有生命周期函数。
  ```js
  // 函数式组件(无状态组件)
  function Hello() {
    return <h1>Hello,jianan</h1>
  }
  ```
- class组件(有状态组件)
  使用class定义、extends继承React.Component。有state进行数据的存储和管理,同时还可以拥有props,有生命周期函数。
  ```js
  // class组件(有状态组件)
  class Hello extends React.Component {
    render() {
      return <h1>Hello jianan</h1>
    }
  }
  ```
##### 无状态组件和有状态组件的使用规则
1、因为数据的更改都是根据状态进行更改的,如果只是单纯的处理一些逻辑,而不需要改变数据的值就使用无状态组件。我们可以使用props进行组件间的通信和传值。
2、如果需要改变某些数据的话,或是想要存储一些数据并且想要对这些数据进行一些增删改查的话,那么就应该使用有状态组件。我们使用的是state,数据会发生变化就会触发生命周期这些函数。
##### 无状态组件和有状态组件传值的取用
- 无状态组件
  使用props传值时,使用props.属性名进行取用。
- 有状态组件
  使用props传值时,使用this.props.属性名进行取用。使用state定义状态时,使用this.state.属性名进行取用。
  
一般数据会通过父组件进行传递,这样就可以进行统一的数据管理,在父级进行一个集中的数据管理。以上是在没有使用redux的情况下,如果使用了redux的话,就会在redux中进行状态管理。
**思考：更多时候,我们应该使用无状态组件还是有状态组件？**

#### 事件处理
##### 事件处理函数的相关语法
React元素的事件处理和DOM元素很相似,但是语法上有些不同,React事件的命名采用小驼峰(camelCase),而不是纯小写。使用JSX语法时需要传入一个函数作为事件处理函数,而不是一个字符串。
```html
<button onclick='fn()'>点击事件</button>
```
```jsx
// React里
<button onClick={fn}>点击事件</button>
```
另外在React中阻止默认事件不能通过返回false的形式,而是要使用preventDefault
```html
<a href="#" onclick="console.log('hello');return false">click</a>
```
```jsx
handleClick(e) {
  e.preventDefault()
  console.log('hello')
}

<a href="#" onClick={handleClick}>click</a>
```
##### 事件处理函数中的this
在JS中,class方法默认不会绑定this,如果我们忘记绑定this.handleClick并且把它传入了onClick,当我们调用这个函数的时候this的值为undefined。
```jsx
class Hello extends React.Component {
  constructor() {
    super()
    // 如果不在constructor绑定this打印出来的值是undefined
    this.updateInfo = this.updateInfo.bind(this)
  }
  updateInfo() {
    console.log(this) 
  }
  updateState() {
    console.log(this)
  }
  updateAge() {
    console.log(this)
  }
  render() {
    return <div>
      <button onClick={this.updateInfo}>更新信息</button>
      {/* 像下面这样进行绑定也是可行的 */}
      <button onClick={this.updateState.bind(this)}>更新状态</button>
      <button onClick={() => this.updateAge()}>更新年龄</button>
    </div>
  }
}
```
或者使用下面这种用箭头函数赋值的方式来定义函数,这是在工作中最为常用的方法：
```jsx
class Hello extends React.Component {
  updateInfo = () => {
    console.log(this)
  }
  render() {
    return <button onClick={this.updateInfo}>更新信息</button>
  }
}
```