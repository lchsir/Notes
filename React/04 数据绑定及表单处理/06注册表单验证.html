<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./js/react.development.js"></script>
    <script src="./js/react-dom.development.js"></script>
    <script src="./js/babel.min.js"></script>
    <style>
        .danger {
            color: red;
        }
    </style>
</head>

<body>
    <div id="root"></div>
    <script type="text/babel">
        class Rts extends React.Component {
            state = {
                name: '',
                password: '',
                sex: '1',
                select: "A",
                select1: "",
                text: 'hello react'
            }

            handleClick = (e) => {
                let name = e.target.name
                this.setState({[name]: e.target.value})
            }

            nameChange = (e) => {
                let rule = /(^[a-zA-Z0-9]{4,10}$)/
                let value = e.target.value
                let error = ''
                if (!value) {
                    error = '请输入昵称'
                } else if (!rule.test(value)) {
                    error = '请输入4-10位昵称'
                } else {
                    error = ''
                }
                this.setState({
                    name: value,
                    nameError: error
                })
            }

            passwordChange = (e) => {
                let rule = /^\S*(?=\S{6,12})(?=\S*\d)(?=\S*[A-Z])(?=\S*[a-z])(?=\S*[!@#$%^&*? ])\S*$/
                let value = e.target.value
                console.log(value);
                let error = ''
                if (!value) {
                    error = '请输入密码'
                } else if (!rule.test(value)) {
                    error = '6-12位密码需要包含大小写字母和数字以及特殊符号'
                } else {
                    error = ''
                }
                this.setState({
                    password: value,
                    passwordError: error
                })
            }

            handleSubmit = () => {
                console.log(this.state);
            }

            render() {
                let { name, nameError, password, passwordError, sex, select, select1, text } = this.state
                let arr = [
                    {id: 1, color: 'red'},
                    {id: 2, color: 'blue'},
                    {id: 3, color: 'green'}
                ]
                return <div>
                    <form>
                        <label>姓名：
                            <input name="name" type="text" defaultValue={name} 
                            onChange={this.nameChange} />
                            <span className='danger'>{nameError}</span>
                        </label>
                        <br/>
                        <label>密码：
                            <input name="password" type="password"
                            defaultValue={password} onChange={this.passwordChange} />
                            <span className='danger'>{passwordError}</span>
                        </label>
                        <br/>
                        <label>性别：
                            <input type="radio" name='sex' value='1'
                                defaultChecked={sex === 1 ? true : false } 
                                onChange={this.handleClick}/>男
                            <input type="radio" name='sex' value='2'
                                defaultChecked={sex === 2 ? true : false } 
                                onChange={this.handleClick}/>女
                        </label>
                        <br/>
                        <label>默认值：
                            <select name="select" defaultValue={select} onChange={this.handleClick}>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                            </select>
                        </label>
                        <label>数组渲染：
                            <select name="select1" defaultValue={select1} onChange={this.handleClick}>
                                {
                                    arr.map((item, index) => <option key={item.id} value={item.id}>{item.color}</option>)
                                }
                            </select>
                        </label>
                        <br/>
                        <label>备注信息：
                            <textarea defaultValue={text} onChange={this.handleClick}></textarea>
                        </label>
                    </form>
                    <button onClick={this.handleSubmit}>提交</button>
                </div>
            }
        }
        ReactDOM.render(<Rts />, document.getElementById('root'))
    </script>
</body>

</html>